plugins {
    id 'java'
    id 'application'
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

repositories {
    mavenCentral()
}

dependencies {
    implementation project(':')

    // Official OpenAI Java SDK
    implementation 'com.openai:openai-java:2.8.1'

    // OkHttp for HTTP client (required by OpenAI SDK)
    implementation 'com.squareup.okhttp3:okhttp:4.12.0'
}

application {
    mainClass = 'dev.braintrust.examples.OpenTelemetryExample'
}

task runOpenTelemetry(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'dev.braintrust.claude.examples.OpenTelemetryExample'
}

task runSimple(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'dev.braintrust.examples.SimpleExample'
}

task runProject(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'dev.braintrust.examples.ProjectExample'
}

task runTestEndpoint(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'dev.braintrust.examples.TestOtlpEndpoint'
}

task runExperiment(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'dev.braintrust.examples.ExperimentExample'
}

task runSimpleExperiment(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'dev.braintrust.examples.SimpleExperimentExample'
}

task runExperimentWithApi(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'dev.braintrust.examples.ExperimentWithApiExample'
}

task runGoStyleExperiment(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'dev.braintrust.examples.SimpleExperimentWithRegistration'
}

task runDebugAuth(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'dev.braintrust.examples.DebugAuthHeader'
}

task runTestEndpoints(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'dev.braintrust.examples.TestApiEndpoints'
}

task runTriviaEval(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'dev.braintrust.claude.examples.TriviaEvaluation'
}
